# Спецификация интерфейса сайта

## Текущее состояние

**Дата:** 2026-01-12  
**Статус:** Начальная разработка функционального слоя

## Целевая функциональность

### Основные разделы (из контент-модели)

1. **Главная (`/`)**
   - Тизер портфолио
   - CTA "Сгенерировать заявку"
   - Быстрая навигация

2. **Услуги (`/services`)**
   - Каталог услуг
   - Карточки с кнопкой "+ в артефакты"
   - Фильтры по фасетам

3. **Портфолио (`/portfolio`)**
   - Список кейсов
   - Детальные страницы (`/portfolio/[slug]`)
   - Фильтры

4. **База знаний (`/kb`)**
   - Поиск по терминам
   - Фасетная навигация
   - Детальные страницы терминов

5. **Stories (`/stories`)**
   - Лента эпизодов
   - Дайджесты по месяцам
   - Навигация по сериям

6. **Артефакты (`/artifacts`)**
   - Корзина артефактов (localStorage)
   - Фильтры по типу
   - Шторка выбора (`/artifacts/picker`)

7. **Заявка (`/request`)**
   - Форма заявки
   - Автоподстановка артефактов
   - Контакты (mailto/Telegram)

## Компоненты (функциональный слой)

### Navigation (Навигация)
**Функционал:**
- Рендеринг меню из routes.json
- Активный маршрут
- Hash-based routing

**Данные:** `routes.json`

### RouteCard (Карточка маршрута)
**Функционал:**
- Отображение маршрута
- Переход по клику
- Показ метаданных (OG)

**Данные:** `routes.json`

### KBGlossary (База знаний)
**Функционал:**
- Список терминов
- Поиск
- Фильтрация по тегам
- Детальная страница термина

**Данные:** `kb_glossary_lite.jsonl`

### StoriesList (Stories)
**Функционал:**
- Лента эпизодов
- Дайджесты
- Навигация по сериям
- Breadcrumbs

**Данные:** `stories_digests.jsonl`, `pages.json` (для деталей)

### ArtifactsCart (Корзина артефактов)
**Функционал:**
- Добавление/удаление артефактов
- Хранение в localStorage
- Отображение списка
- Передача в форму заявки

**Данные:** localStorage `vp_artifacts`

### RequestForm (Форма заявки)
**Функционал:**
- Поля: текст, контакт
- Автоподстановка артефактов
- Отправка через mailto/Telegram
- Валидация

**Данные:** localStorage `vp_artifacts`

## Роутинг

### Hash-based routing
- `#/` — главная
- `#/services` — услуги
- `#/kb` — база знаний
- `#/stories` — Stories
- `#/artifacts` — корзина
- `#/request` — заявка

### Состояние роутера
```javascript
{
  currentRoute: '/',
  params: {},
  query: {}
}
```

## Данные из core

### Формат данных

**Routes:**
```json
{
  "version": 1,
  "routes": [
    {
      "path": "/",
      "title": "Главная",
      "in_sitemap": true,
      "og": { ... }
    }
  ]
}
```

**KB Glossary:**
```jsonl
{"slug":"...","title":"...","lite_summary":"...","link":"kb/..."}
```

**Stories Digests:**
```jsonl
{"slug":"digest-2026-01","title":"...","episodes":[...],"generated_at":"..."}
```

## Контракт с ядром

### Что интерфейс ожидает от core:
1. ✅ `routes.json` — маршруты с метаданными
2. ✅ `kb_glossary_lite.jsonl` — термины KB
3. ✅ `stories_digests.jsonl` — дайджесты Stories
4. ⚠️ `pages.json` — детальные страницы (нужно добавить в экспорт)
5. ⚠️ Детальные данные страниц (Markdown → HTML)

### Что интерфейс предоставляет ядру:
1. Обратная связь по UX (через Issues)
2. Предложения по IA (через Site Handoff Protocol)

## Следующие шаги

1. [ ] Определить структуру компонентов
2. [ ] Реализовать роутинг
3. [ ] Создать компоненты без стилей
4. [ ] Подключить данные из core
5. [ ] Протестировать функциональность
6. [ ] Документировать API компонентов
